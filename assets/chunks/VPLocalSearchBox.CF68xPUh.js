var e=Object.defineProperty,t=(t,r,n)=>((t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n)(t,"symbol"!=typeof r?r+"":r,n);import{k as r,$ as n,d as o,aw as i,c as a,a3 as s,a0 as l,at as u,az as c,ay as d,o as h,e as f,h as p,aF as v,g as m,aK as y,aL as g,ao as b,b as w,H as x,Z as F,r as E,F as _,f as k,t as S,aM as I,a9 as A,au as C}from"./naive-ui.DyEX4l5m.js";import{_ as N}from"./preload-helper.DZ_bAA1L.js";import{u as T,t as O,a as D,c as R,b as M,d as L,w as P,o as z,e as j,r as B,f as V,g as $,h as W,i as G,j as q,p as J}from"../app.Ct36hRSC.js";import{_ as K}from"./plugin-vue_export-helper.BCo6x5W8.js";const H={root:()=>N((()=>import("./@localSearchIndexroot.BL95JMs4.js")),[])};
/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var U=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Q=U.join(","),Y="undefined"==typeof Element,Z=Y?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,X=!Y&&Element.prototype.getRootNode?function(e){var t;return null==e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null==e?void 0:e.ownerDocument},ee=function e(t,r){var n;void 0===r&&(r=!0);var o=null==t||null===(n=t.getAttribute)||void 0===n?void 0:n.call(t,"inert");return""===o||"true"===o||r&&t&&e(t.parentNode)},te=function(e,t,r){if(ee(e))return[];var n=Array.prototype.slice.apply(e.querySelectorAll(Q));return t&&Z.call(e,Q)&&n.unshift(e),n=n.filter(r)},re=function e(t,r,n){for(var o=[],i=Array.from(t);i.length;){var a=i.shift();if(!ee(a,!1))if("SLOT"===a.tagName){var s=a.assignedElements(),l=e(s.length?s:a.children,!0,n);n.flatten?o.push.apply(o,l):o.push({scopeParent:a,candidates:l})}else{Z.call(a,Q)&&n.filter(a)&&(r||!t.includes(a))&&o.push(a);var u=a.shadowRoot||"function"==typeof n.getShadowRoot&&n.getShadowRoot(a),c=!ee(u,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(a));if(u&&c){var d=e(!0===u?a.children:u.children,!0,n);n.flatten?o.push.apply(o,d):o.push({scopeParent:a,candidates:d})}else i.unshift.apply(i,a.children)}}return o},ne=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},oe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||function(e){var t,r=null==e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===r||"true"===r}(e))&&!ne(e)?0:e.tabIndex},ie=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},ae=function(e){return"INPUT"===e.tagName},se=function(e){return function(e){return ae(e)&&"radio"===e.type}(e)&&!function(e){if(!e.name)return!0;var t,r=e.form||X(e),n=function(e){return r.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)t=n(window.CSS.escape(e.name));else try{t=n(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var o=function(e,t){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===t)return e[r]}(t,e.form);return!o||o===e}(e)},le=function(e){var t=e.getBoundingClientRect(),r=t.width,n=t.height;return 0===r&&0===n},ue=function(e,t){var r=t.displayCheck,n=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var o=Z.call(e,"details>summary:first-of-type")?e.parentElement:e;if(Z.call(o,"details:not([open]) *"))return!0;if(r&&"full"!==r&&"legacy-full"!==r){if("non-zero-area"===r)return le(e)}else{if("function"==typeof n){for(var i=e;e;){var a=e.parentElement,s=X(e);if(a&&!a.shadowRoot&&!0===n(a))return le(e);e=e.assignedSlot?e.assignedSlot:a||s===e.ownerDocument?a:s.host}e=i}if(function(e){var t,r,n,o,i=e&&X(e),a=null===(t=i)||void 0===t?void 0:t.host,s=!1;if(i&&i!==e)for(s=!!(null!==(r=a)&&void 0!==r&&null!==(n=r.ownerDocument)&&void 0!==n&&n.contains(a)||null!=e&&null!==(o=e.ownerDocument)&&void 0!==o&&o.contains(e));!s&&a;){var l,u,c;s=!(null===(u=a=null===(l=i=X(a))||void 0===l?void 0:l.host)||void 0===u||null===(c=u.ownerDocument)||void 0===c||!c.contains(a))}return s}(e))return!e.getClientRects().length;if("legacy-full"!==r)return!0}return!1},ce=function(e,t){return!(t.disabled||ee(t)||function(e){return ae(e)&&"hidden"===e.type}(t)||ue(t,e)||function(e){return"DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}))}(t)||function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if("FIELDSET"===t.tagName&&t.disabled){for(var r=0;r<t.children.length;r++){var n=t.children.item(r);if("LEGEND"===n.tagName)return!!Z.call(t,"fieldset[disabled] *")||!n.contains(e)}return!0}t=t.parentElement}return!1}(t))},de=function(e,t){return!(se(t)||oe(t)<0||!ce(e,t))},he=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},fe=function e(t){var r=[],n=[];return t.forEach((function(t,o){var i=!!t.scopeParent,a=i?t.scopeParent:t,s=function(e,t){var r=oe(e);return r<0&&t&&!ne(e)?0:r}(a,i),l=i?e(t.candidates):a;0===s?i?r.push.apply(r,l):r.push(a):n.push({documentOrder:o,tabIndex:s,item:t,isScope:i,content:l})})),n.sort(ie).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(r)},pe=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==Z.call(e,Q)&&de(t,e)},ve=U.concat("iframe").join(","),me=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==Z.call(e,ve)&&ce(t,e)};
/*!
* focus-trap 7.6.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function ge(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function be(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?be(Object(r),!0).forEach((function(t){ge(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):be(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function xe(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return ye(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ye(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Fe=function(e,t){if(e.length>0){var r=e[e.length-1];r!==t&&r._setPausedState(!0)}var n=e.indexOf(t);-1===n||e.splice(n,1),e.push(t)},Ee=function(e,t){var r=e.indexOf(t);-1!==r&&e.splice(r,1),e.length>0&&!e[e.length-1]._isManuallyPaused()&&e[e.length-1]._setPausedState(!1)},_e=function(e){return"Tab"===(null==e?void 0:e.key)||9===(null==e?void 0:e.keyCode)},ke=function(e){return _e(e)&&!e.shiftKey},Se=function(e){return _e(e)&&e.shiftKey},Ie=function(e){return setTimeout(e,0)},Ae=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return"function"==typeof e?e.apply(void 0,r):e},Ce=function(e){return e.target.shadowRoot&&"function"==typeof e.composedPath?e.composedPath()[0]:e.target},Ne=[],Te=function(e,t){var r,n=(null==t?void 0:t.document)||document,o=(null==t?void 0:t.trapStack)||Ne,i=we({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:ke,isKeyBackward:Se},t),a={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},s=function(e,t,r){return e&&void 0!==e[t]?e[t]:i[r||t]},l=function(e,t){var r="function"==typeof(null==t?void 0:t.composedPath)?t.composedPath():void 0;return a.containerGroups.findIndex((function(t){var n=t.container,o=t.tabbableNodes;return n.contains(e)||(null==r?void 0:r.includes(n))||o.find((function(t){return t===e}))}))},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.hasFallback,o=void 0!==r&&r,a=t.params,s=void 0===a?[]:a,l=i[e];if("function"==typeof l&&(l=l.apply(void 0,xe(s))),!0===l&&(l=void 0),!l){if(void 0===l||!1===l)return l;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var u=l;if("string"==typeof l){try{u=n.querySelector(l)}catch(c){throw new Error("`".concat(e,'` appears to be an invalid selector; error="').concat(c.message,'"'))}if(!u&&!o)throw new Error("`".concat(e,"` as selector refers to no known node"))}return u},c=function(){var e=u("initialFocus",{hasFallback:!0});if(!1===e)return!1;if(void 0===e||e&&!me(e,i.tabbableOptions))if(l(n.activeElement)>=0)e=n.activeElement;else{var t=a.tabbableGroups[0];e=t&&t.firstTabbableNode||u("fallbackFocus")}else null===e&&(e=u("fallbackFocus"));if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},d=function(){if(a.containerGroups=a.containers.map((function(e){var t=function(e,t){var r;return r=(t=t||{}).getShadowRoot?re([e],t.includeContainer,{filter:de.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:he}):te(e,t.includeContainer,de.bind(null,t)),fe(r)}(e,i.tabbableOptions),r=function(e,t){return(t=t||{}).getShadowRoot?re([e],t.includeContainer,{filter:ce.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):te(e,t.includeContainer,ce.bind(null,t))}(e,i.tabbableOptions),n=t.length>0?t[0]:void 0,o=t.length>0?t[t.length-1]:void 0,a=r.find((function(e){return pe(e)})),s=r.slice().reverse().find((function(e){return pe(e)})),l=!!t.find((function(e){return oe(e)>0}));return{container:e,tabbableNodes:t,focusableNodes:r,posTabIndexesFound:l,firstTabbableNode:n,lastTabbableNode:o,firstDomTabbableNode:a,lastDomTabbableNode:s,nextTabbableNode:function(e){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=t.indexOf(e);return o<0?n?r.slice(r.indexOf(e)+1).find((function(e){return pe(e)})):r.slice(0,r.indexOf(e)).reverse().find((function(e){return pe(e)})):t[o+(n?1:-1)]}}})),a.tabbableGroups=a.containerGroups.filter((function(e){return e.tabbableNodes.length>0})),a.tabbableGroups.length<=0&&!u("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(a.containerGroups.find((function(e){return e.posTabIndexesFound}))&&a.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},h=function(e){var t=e.activeElement;if(t)return t.shadowRoot&&null!==t.shadowRoot.activeElement?h(t.shadowRoot):t},f=function(e){!1!==e&&e!==h(document)&&(e&&e.focus?(e.focus({preventScroll:!!i.preventScroll}),a.mostRecentlyFocusedNode=e,function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"==typeof e.select}(e)&&e.select()):f(c()))},p=function(e){var t=u("setReturnFocus",{params:[e]});return t||!1!==t&&e},v=function(e){var t=e.target,r=e.event,n=e.isBackward,o=void 0!==n&&n;t=t||Ce(r),d();var s=null;if(a.tabbableGroups.length>0){var c=l(t,r),h=c>=0?a.containerGroups[c]:void 0;if(c<0)s=o?a.tabbableGroups[a.tabbableGroups.length-1].lastTabbableNode:a.tabbableGroups[0].firstTabbableNode;else if(o){var f=a.tabbableGroups.findIndex((function(e){var r=e.firstTabbableNode;return t===r}));if(f<0&&(h.container===t||me(t,i.tabbableOptions)&&!pe(t,i.tabbableOptions)&&!h.nextTabbableNode(t,!1))&&(f=c),f>=0){var p=0===f?a.tabbableGroups.length-1:f-1,v=a.tabbableGroups[p];s=oe(t)>=0?v.lastTabbableNode:v.lastDomTabbableNode}else _e(r)||(s=h.nextTabbableNode(t,!1))}else{var m=a.tabbableGroups.findIndex((function(e){var r=e.lastTabbableNode;return t===r}));if(m<0&&(h.container===t||me(t,i.tabbableOptions)&&!pe(t,i.tabbableOptions)&&!h.nextTabbableNode(t))&&(m=c),m>=0){var y=m===a.tabbableGroups.length-1?0:m+1,g=a.tabbableGroups[y];s=oe(t)>=0?g.firstTabbableNode:g.firstDomTabbableNode}else _e(r)||(s=h.nextTabbableNode(t))}}else s=u("fallbackFocus");return s},m=function(e){var t=Ce(e);l(t,e)>=0||(Ae(i.clickOutsideDeactivates,e)?r.deactivate({returnFocus:i.returnFocusOnDeactivate}):Ae(i.allowOutsideClick,e)||e.preventDefault())},y=function(e){var t=Ce(e),r=l(t,e)>=0;if(r||t instanceof Document)r&&(a.mostRecentlyFocusedNode=t);else{var n;e.stopImmediatePropagation();var o=!0;if(a.mostRecentlyFocusedNode)if(oe(a.mostRecentlyFocusedNode)>0){var s=l(a.mostRecentlyFocusedNode),u=a.containerGroups[s].tabbableNodes;if(u.length>0){var d=u.findIndex((function(e){return e===a.mostRecentlyFocusedNode}));d>=0&&(i.isKeyForward(a.recentNavEvent)?d+1<u.length&&(n=u[d+1],o=!1):d-1>=0&&(n=u[d-1],o=!1))}}else a.containerGroups.some((function(e){return e.tabbableNodes.some((function(e){return oe(e)>0}))}))||(o=!1);else o=!1;o&&(n=v({target:a.mostRecentlyFocusedNode,isBackward:i.isKeyBackward(a.recentNavEvent)})),f(n||(a.mostRecentlyFocusedNode||c()))}a.recentNavEvent=void 0},g=function(e){(i.isKeyForward(e)||i.isKeyBackward(e))&&function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a.recentNavEvent=e;var r=v({event:e,isBackward:t});r&&(_e(e)&&e.preventDefault(),f(r))}(e,i.isKeyBackward(e))},b=function(e){var t;"Escape"!==(null==(t=e)?void 0:t.key)&&"Esc"!==(null==t?void 0:t.key)&&27!==(null==t?void 0:t.keyCode)||!1===Ae(i.escapeDeactivates,e)||(e.preventDefault(),r.deactivate())},w=function(e){var t=Ce(e);l(t,e)>=0||Ae(i.clickOutsideDeactivates,e)||Ae(i.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},x=function(){if(a.active)return Fe(o,r),a.delayInitialFocusTimer=i.delayInitialFocus?Ie((function(){f(c())})):f(c()),n.addEventListener("focusin",y,!0),n.addEventListener("mousedown",m,{capture:!0,passive:!1}),n.addEventListener("touchstart",m,{capture:!0,passive:!1}),n.addEventListener("click",w,{capture:!0,passive:!1}),n.addEventListener("keydown",g,{capture:!0,passive:!1}),n.addEventListener("keydown",b),r},F=function(){if(a.active)return n.removeEventListener("focusin",y,!0),n.removeEventListener("mousedown",m,!0),n.removeEventListener("touchstart",m,!0),n.removeEventListener("click",w,!0),n.removeEventListener("keydown",g,!0),n.removeEventListener("keydown",b),r},E="undefined"!=typeof window&&"MutationObserver"in window?new MutationObserver((function(e){e.some((function(e){return Array.from(e.removedNodes).some((function(e){return e===a.mostRecentlyFocusedNode}))}))&&f(c())})):void 0,_=function(){E&&(E.disconnect(),a.active&&!a.paused&&a.containers.map((function(e){E.observe(e,{subtree:!0,childList:!0})})))};return r={get active(){return a.active},get paused(){return a.paused},activate:function(e){if(a.active)return this;var t=s(e,"onActivate"),r=s(e,"onPostActivate"),o=s(e,"checkCanFocusTrap");o||d(),a.active=!0,a.paused=!1,a.nodeFocusedBeforeActivation=n.activeElement,null==t||t();var i=function(){o&&d(),x(),_(),null==r||r()};return o?(o(a.containers.concat()).then(i,i),this):(i(),this)},deactivate:function(e){if(!a.active)return this;var t=we({onDeactivate:i.onDeactivate,onPostDeactivate:i.onPostDeactivate,checkCanReturnFocus:i.checkCanReturnFocus},e);clearTimeout(a.delayInitialFocusTimer),a.delayInitialFocusTimer=void 0,F(),a.active=!1,a.paused=!1,_(),Ee(o,r);var n=s(t,"onDeactivate"),l=s(t,"onPostDeactivate"),u=s(t,"checkCanReturnFocus"),c=s(t,"returnFocus","returnFocusOnDeactivate");null==n||n();var d=function(){Ie((function(){c&&f(p(a.nodeFocusedBeforeActivation)),null==l||l()}))};return c&&u?(u(p(a.nodeFocusedBeforeActivation)).then(d,d),this):(d(),this)},pause:function(e){return a.active?(a.manuallyPaused=!0,this._setPausedState(!0,e)):this},unpause:function(e){return a.active?(a.manuallyPaused=!1,o[o.length-1]!==this?this:this._setPausedState(!1,e)):this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return a.containers=t.map((function(e){return"string"==typeof e?n.querySelector(e):e})),a.active&&d(),_(),this}},Object.defineProperties(r,{_isManuallyPaused:{value:function(){return a.manuallyPaused}},_setPausedState:{value:function(e,t){if(a.paused===e)return this;if(a.paused=e,e){var r=s(t,"onPause"),n=s(t,"onPostPause");null==r||r(),F(),_(),null==n||n()}else{var o=s(t,"onUnpause"),i=s(t,"onPostUnpause");null==o||o(),d(),x(),_(),null==i||i()}return this}}}),r.updateContainerElements(e),r};class Oe{constructor(e,t=!0,r=[],n=5e3){this.ctx=e,this.iframes=t,this.exclude=r,this.iframesTimeout=n}static matches(e,t){const r="string"==typeof t?[t]:t,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(n){let t=!1;return r.every((r=>!n.call(e,r)||(t=!0,!1))),t}return!1}getContexts(){let e,t=[];return e=void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[],e.forEach((e=>{const r=t.filter((t=>t.contains(e))).length>0;-1!==t.indexOf(e)||r||t.push(e)})),t}getIframeContents(e,t,r=()=>{}){let n;try{const t=e.contentWindow;if(n=t.document,!t||!n)throw new Error("iframe inaccessible")}catch(o){r()}n&&t(n)}isIframeBlank(e){const t="about:blank",r=e.getAttribute("src").trim();return e.contentWindow.location.href===t&&r!==t&&r}observeIframeLoad(e,t,r){let n=!1,o=null;const i=()=>{if(!n){n=!0,clearTimeout(o);try{this.isIframeBlank(e)||(e.removeEventListener("load",i),this.getIframeContents(e,t,r))}catch(a){r()}}};e.addEventListener("load",i),o=setTimeout(i,this.iframesTimeout)}onIframeReady(e,t,r){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,r):this.getIframeContents(e,t,r):this.observeIframeLoad(e,t,r)}catch(n){r()}}waitForIframes(e,t){let r=0;this.forEachIframe(e,(()=>!0),(e=>{r++,this.waitForIframes(e.querySelector("html"),(()=>{--r||t()}))}),(e=>{e||t()}))}forEachIframe(e,t,r,n=()=>{}){let o=e.querySelectorAll("iframe"),i=o.length,a=0;o=Array.prototype.slice.call(o);const s=()=>{--i<=0&&n(a)};i||s(),o.forEach((e=>{Oe.matches(e,this.exclude)?s():this.onIframeReady(e,(n=>{t(e)&&(a++,r(n)),s()}),s)}))}createIterator(e,t,r){return document.createNodeIterator(e,t,r,!1)}createInstanceOnIframe(e){return new Oe(e.querySelector("html"),this.iframes)}compareNodeIframe(e,t,r){if(e.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_PRECEDING){if(null===t)return!0;if(t.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}getIteratorNode(e){const t=e.previousNode();let r;return r=(null===t||e.nextNode())&&e.nextNode(),{prevNode:t,node:r}}checkIframeFilter(e,t,r,n){let o=!1,i=!1;return n.forEach(((e,t)=>{e.val===r&&(o=t,i=e.handled)})),this.compareNodeIframe(e,t,r)?(!1!==o||i?!1===o||i||(n[o].handled=!0):n.push({val:r,handled:!0}),!0):(!1===o&&n.push({val:r,handled:!1}),!1)}handleOpenIframes(e,t,r,n){e.forEach((e=>{e.handled||this.getIframeContents(e.val,(e=>{this.createInstanceOnIframe(e).forEachNode(t,r,n)}))}))}iterateThroughNodes(e,t,r,n,o){const i=this.createIterator(t,e,n);let a,s,l=[],u=[],c=()=>(({prevNode:s,node:a}=this.getIteratorNode(i)),a);for(;c();)this.iframes&&this.forEachIframe(t,(e=>this.checkIframeFilter(a,s,e,l)),(t=>{this.createInstanceOnIframe(t).forEachNode(e,(e=>u.push(e)),n)})),u.push(a);u.forEach((e=>{r(e)})),this.iframes&&this.handleOpenIframes(l,e,r,n),o()}forEachNode(e,t,r,n=()=>{}){const o=this.getContexts();let i=o.length;i||n(),o.forEach((o=>{const a=()=>{this.iterateThroughNodes(e,o,t,r,(()=>{--i<=0&&n()}))};this.iframes?this.waitForIframes(o,a):a()}))}}let De=class{constructor(e){this.ctx=e,this.ie=!1;const t=window.navigator.userAgent;(t.indexOf("MSIE")>-1||t.indexOf("Trident")>-1)&&(this.ie=!0)}set opt(e){this._opt=Object.assign({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:()=>{},noMatch:()=>{},filter:()=>!0,done:()=>{},debug:!1,log:window.console},e)}get opt(){return this._opt}get iterator(){return new Oe(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}log(e,t="debug"){const r=this.opt.log;this.opt.debug&&"object"==typeof r&&"function"==typeof r[t]&&r[t](`mark.js: ${e}`)}escapeStr(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}createRegExp(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}createSynonymsRegExp(e){const t=this.opt.synonyms,r=this.opt.caseSensitive?"":"i",n=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(let o in t)if(t.hasOwnProperty(o)){const i=t[o],a="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(o):this.escapeStr(o),s="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(i):this.escapeStr(i);""!==a&&""!==s&&(e=e.replace(new RegExp(`(${this.escapeStr(a)}|${this.escapeStr(s)})`,`gm${r}`),n+`(${this.processSynomyms(a)}|${this.processSynomyms(s)})`+n))}return e}processSynomyms(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}setupWildcardsRegExp(e){return(e=e.replace(/(?:\\)*\?/g,(e=>"\\"===e.charAt(0)?"?":""))).replace(/(?:\\)*\*/g,(e=>"\\"===e.charAt(0)?"*":""))}createWildcardsRegExp(e){let t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}setupIgnoreJoinersRegExp(e){return e.replace(/[^(|)\\]/g,((e,t,r)=>{let n=r.charAt(t+1);return/[(|)\\]/.test(n)||""===n?e:e+"\0"}))}createJoinersRegExp(e){let t=[];const r=this.opt.ignorePunctuation;return Array.isArray(r)&&r.length&&t.push(this.escapeStr(r.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join(`[${t.join("")}]*`):e}createDiacriticsRegExp(e){const t=this.opt.caseSensitive?"":"i",r=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"];let n=[];return e.split("").forEach((o=>{r.every((r=>{if(-1!==r.indexOf(o)){if(n.indexOf(r)>-1)return!1;e=e.replace(new RegExp(`[${r}]`,`gm${t}`),`[${r}]`),n.push(r)}return!0}))})),e}createMergedBlanksRegExp(e){return e.replace(/[\s]+/gim,"[\\s]+")}createAccuracyRegExp(e){let t=this.opt.accuracy,r="string"==typeof t?t:t.value,n="string"==typeof t?[]:t.limiters,o="";switch(n.forEach((e=>{o+=`|${this.escapeStr(e)}`})),r){case"partially":default:return`()(${e})`;case"complementary":return o="\\s"+(o||this.escapeStr("!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿")),`()([^${o}]*${e}[^${o}]*)`;case"exactly":return`(^|\\s${o})(${e})(?=$|\\s${o})`}}getSeparatedKeywords(e){let t=[];return e.forEach((e=>{this.opt.separateWordSearch?e.split(" ").forEach((e=>{e.trim()&&-1===t.indexOf(e)&&t.push(e)})):e.trim()&&-1===t.indexOf(e)&&t.push(e)})),{keywords:t.sort(((e,t)=>t.length-e.length)),length:t.length}}isNumeric(e){return Number(parseFloat(e))==e}checkRanges(e){if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];const t=[];let r=0;return e.sort(((e,t)=>e.start-t.start)).forEach((e=>{let{start:n,end:o,valid:i}=this.callNoMatchOnInvalidRanges(e,r);i&&(e.start=n,e.length=o-n,t.push(e),r=o)})),t}callNoMatchOnInvalidRanges(e,t){let r,n,o=!1;return e&&void 0!==e.start?(r=parseInt(e.start,10),n=r+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&n-t>0&&n-r>0?o=!0:(this.log(`Ignoring invalid or overlapping range: ${JSON.stringify(e)}`),this.opt.noMatch(e))):(this.log(`Ignoring invalid range: ${JSON.stringify(e)}`),this.opt.noMatch(e)),{start:r,end:n,valid:o}}checkWhitespaceRanges(e,t,r){let n,o=!0,i=r.length,a=t-i,s=parseInt(e.start,10)-a;return s=s>i?i:s,n=s+parseInt(e.length,10),n>i&&(n=i,this.log(`End range automatically set to the max value of ${i}`)),s<0||n-s<0||s>i||n>i?(o=!1,this.log(`Invalid range: ${JSON.stringify(e)}`),this.opt.noMatch(e)):""===r.substring(s,n).replace(/\s+/g,"")&&(o=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:s,end:n,valid:o}}getTextNodes(e){let t="",r=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,(e=>{r.push({start:t.length,end:(t+=e.textContent).length,node:e})}),(e=>this.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT),(()=>{e({value:t,nodes:r})}))}matchesExclude(e){return Oe.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}wrapRangeInTextNode(e,t,r){const n=this.opt.element?this.opt.element:"mark",o=e.splitText(t),i=o.splitText(r-t);let a=document.createElement(n);return a.setAttribute("data-markjs","true"),this.opt.className&&a.setAttribute("class",this.opt.className),a.textContent=o.textContent,o.parentNode.replaceChild(a,o),i}wrapRangeInMappedTextNode(e,t,r,n,o){e.nodes.every(((i,a)=>{const s=e.nodes[a+1];if(void 0===s||s.start>t){if(!n(i.node))return!1;const s=t-i.start,l=(r>i.end?i.end:r)-i.start,u=e.value.substr(0,i.start),c=e.value.substr(l+i.start);if(i.node=this.wrapRangeInTextNode(i.node,s,l),e.value=u+c,e.nodes.forEach(((t,r)=>{r>=a&&(e.nodes[r].start>0&&r!==a&&(e.nodes[r].start-=l),e.nodes[r].end-=l)})),r-=l,o(i.node.previousSibling,i.start),!(r>i.end))return!1;t=i.end}return!0}))}wrapMatches(e,t,r,n,o){const i=0===t?0:t+1;this.getTextNodes((t=>{t.nodes.forEach((t=>{let o;for(t=t.node;null!==(o=e.exec(t.textContent))&&""!==o[i];){if(!r(o[i],t))continue;let a=o.index;if(0!==i)for(let e=1;e<i;e++)a+=o[e].length;t=this.wrapRangeInTextNode(t,a,a+o[i].length),n(t.previousSibling),e.lastIndex=0}})),o()}))}wrapMatchesAcrossElements(e,t,r,n,o){const i=0===t?0:t+1;this.getTextNodes((t=>{let a;for(;null!==(a=e.exec(t.value))&&""!==a[i];){let o=a.index;if(0!==i)for(let e=1;e<i;e++)o+=a[e].length;const s=o+a[i].length;this.wrapRangeInMappedTextNode(t,o,s,(e=>r(a[i],e)),((t,r)=>{e.lastIndex=r,n(t)}))}o()}))}wrapRangeFromIndex(e,t,r,n){this.getTextNodes((o=>{const i=o.value.length;e.forEach(((e,n)=>{let{start:a,end:s,valid:l}=this.checkWhitespaceRanges(e,i,o.value);l&&this.wrapRangeInMappedTextNode(o,a,s,(r=>t(r,e,o.value.substring(a,s),n)),(t=>{r(t,e)}))})),n()}))}unwrapMatches(e){const t=e.parentNode;let r=document.createDocumentFragment();for(;e.firstChild;)r.appendChild(e.removeChild(e.firstChild));t.replaceChild(r,e),this.ie?this.normalizeTextNode(t):t.normalize()}normalizeTextNode(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}markRegExp(e,t){this.opt=t,this.log(`Searching with expression "${e}"`);let r=0,n="wrapMatches";this.opt.acrossElements&&(n="wrapMatchesAcrossElements"),this[n](e,this.opt.ignoreGroups,((e,t)=>this.opt.filter(t,e,r)),(e=>{r++,this.opt.each(e)}),(()=>{0===r&&this.opt.noMatch(e),this.opt.done(r)}))}mark(e,t){this.opt=t;let r=0,n="wrapMatches";const{keywords:o,length:i}=this.getSeparatedKeywords("string"==typeof e?[e]:e),a=this.opt.caseSensitive?"":"i",s=e=>{let t=new RegExp(this.createRegExp(e),`gm${a}`),l=0;this.log(`Searching with expression "${t}"`),this[n](t,1,((t,n)=>this.opt.filter(n,e,r,l)),(e=>{l++,r++,this.opt.each(e)}),(()=>{0===l&&this.opt.noMatch(e),o[i-1]===e?this.opt.done(r):s(o[o.indexOf(e)+1])}))};this.opt.acrossElements&&(n="wrapMatchesAcrossElements"),0===i?this.opt.done(r):s(o[0])}markRanges(e,t){this.opt=t;let r=0,n=this.checkRanges(e);n&&n.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(n)),this.wrapRangeFromIndex(n,((e,t,r,n)=>this.opt.filter(e,t,r,n)),((e,t)=>{r++,this.opt.each(e,t)}),(()=>{this.opt.done(r)}))):this.opt.done(r)}unmark(e){this.opt=e;let t=this.opt.element?this.opt.element:"*";t+="[data-markjs]",this.opt.className&&(t+=`.${this.opt.className}`),this.log(`Removal selector "${t}"`),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,(e=>{this.unwrapMatches(e)}),(e=>{const r=Oe.matches(e,t),n=this.matchesExclude(e);return!r||n?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}),this.opt.done)}};function Re(e){const t=new De(e);return this.mark=(e,r)=>(t.mark(e,r),this),this.markRegExp=(e,r)=>(t.markRegExp(e,r),this),this.markRanges=(e,r)=>(t.markRanges(e,r),this),this.unmark=e=>(t.unmark(e),this),this}var Me=function(){return Me=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Me.apply(this,arguments)};function Le(e,t,r,n){return new(r||(r=Promise))((function(t,o){function i(e){try{s(n.next(e))}catch(t){o(t)}}function a(e){try{s(n.throw(e))}catch(t){o(t)}}function s(e){var n;e.done?t(e.value):(n=e.value,n instanceof r?n:new r((function(e){e(n)}))).then(i,a)}s((n=n.apply(e,[])).next())}))}function Pe(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(l){s=[6,l],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function ze(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function je(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,i=r.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(n=i.next()).done;)a.push(n.value)}catch(s){o={error:s}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(o)throw o.error}}return a}"function"==typeof SuppressedError&&SuppressedError;var Be,Ve="KEYS",$e="VALUES",We="",Ge=function(){function e(e,t){var r=e._tree,n=Array.from(r.keys());this.set=e,this._type=t,this._path=n.length>0?[{node:r,keys:n}]:[]}return e.prototype.next=function(){var e=this.dive();return this.backtrack(),e},e.prototype.dive=function(){if(0===this._path.length)return{done:!0,value:void 0};var e=qe(this._path),t=e.node,r=e.keys;if(qe(r)===We)return{done:!1,value:this.result()};var n=t.get(qe(r));return this._path.push({node:n,keys:Array.from(n.keys())}),this.dive()},e.prototype.backtrack=function(){if(0!==this._path.length){var e=qe(this._path).keys;e.pop(),e.length>0||(this._path.pop(),this.backtrack())}},e.prototype.key=function(){return this.set._prefix+this._path.map((function(e){var t=e.keys;return qe(t)})).filter((function(e){return e!==We})).join("")},e.prototype.value=function(){return qe(this._path).node.get(We)},e.prototype.result=function(){switch(this._type){case $e:return this.value();case Ve:return this.key();default:return[this.key(),this.value()]}},e.prototype[Symbol.iterator]=function(){return this},e}(),qe=function(e){return e[e.length-1]},Je=function(e,t,r,n,o,i,a,s){var l,u,c=i*a;try{e:for(var d=ze(e.keys()),h=d.next();!h.done;h=d.next()){var f=h.value;if(f===We){var p=o[c-1];p<=r&&n.set(s,[e.get(f),p])}else{for(var v=i,m=0;m<f.length;++m,++v){for(var y=f[m],g=a*v,b=g-a,w=o[g],x=Math.max(0,v-r-1),F=Math.min(a-1,v+r),E=x;E<F;++E){var _=y!==t[E],k=o[b+E]+ +_,S=o[b+E+1]+1,I=o[g+E]+1,A=o[g+E+1]=Math.min(k,S,I);A<w&&(w=A)}if(w>r)continue e}Je(e.get(f),t,r,n,o,v,a,s+f)}}}catch(C){l={error:C}}finally{try{h&&!h.done&&(u=d.return)&&u.call(d)}finally{if(l)throw l.error}}},Ke=function(){function e(e,t){void 0===e&&(e=new Map),void 0===t&&(t=""),this._size=void 0,this._tree=e,this._prefix=t}return e.prototype.atPrefix=function(t){var r,n;if(!t.startsWith(this._prefix))throw new Error("Mismatched prefix");var o=je(He(this._tree,t.slice(this._prefix.length)),2),i=o[0],a=o[1];if(void 0===i){var s=je(et(a),2),l=s[0],u=s[1];try{for(var c=ze(l.keys()),d=c.next();!d.done;d=c.next()){var h=d.value;if(h!==We&&h.startsWith(u)){var f=new Map;return f.set(h.slice(u.length),l.get(h)),new e(f,t)}}}catch(p){r={error:p}}finally{try{d&&!d.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}}return new e(i,t)},e.prototype.clear=function(){this._size=void 0,this._tree.clear()},e.prototype.delete=function(e){return this._size=void 0,Ye(this._tree,e)},e.prototype.entries=function(){return new Ge(this,"ENTRIES")},e.prototype.forEach=function(e){var t,r;try{for(var n=ze(this),o=n.next();!o.done;o=n.next()){var i=je(o.value,2);e(i[0],i[1],this)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.fuzzyGet=function(e,t){return function(e,t,r){var n=new Map;if(void 0===t)return n;for(var o=t.length+1,i=o+r,a=new Uint8Array(i*o).fill(r+1),s=0;s<o;++s)a[s]=s;for(var l=1;l<i;++l)a[l*o]=l;return Je(e,t,r,n,a,1,o,""),n}(this._tree,e,t)},e.prototype.get=function(e){var t=Ue(this._tree,e);return void 0!==t?t.get(We):void 0},e.prototype.has=function(e){var t=Ue(this._tree,e);return void 0!==t&&t.has(We)},e.prototype.keys=function(){return new Ge(this,Ve)},e.prototype.set=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");return this._size=void 0,Qe(this._tree,e).set(We,t),this},Object.defineProperty(e.prototype,"size",{get:function(){if(this._size)return this._size;this._size=0;for(var e=this.entries();!e.next().done;)this._size+=1;return this._size},enumerable:!1,configurable:!0}),e.prototype.update=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");this._size=void 0;var r=Qe(this._tree,e);return r.set(We,t(r.get(We))),this},e.prototype.fetch=function(e,t){if("string"!=typeof e)throw new Error("key must be a string");this._size=void 0;var r=Qe(this._tree,e),n=r.get(We);return void 0===n&&r.set(We,n=t()),n},e.prototype.values=function(){return new Ge(this,$e)},e.prototype[Symbol.iterator]=function(){return this.entries()},e.from=function(t){var r,n,o=new e;try{for(var i=ze(t),a=i.next();!a.done;a=i.next()){var s=je(a.value,2),l=s[0],u=s[1];o.set(l,u)}}catch(c){r={error:c}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},e.fromObject=function(t){return e.from(Object.entries(t))},e}(),He=function(e,t,r){var n,o;if(void 0===r&&(r=[]),0===t.length||null==e)return[e,r];try{for(var i=ze(e.keys()),a=i.next();!a.done;a=i.next()){var s=a.value;if(s!==We&&t.startsWith(s))return r.push([e,s]),He(e.get(s),t.slice(s.length),r)}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}return r.push([e,t]),He(void 0,"",r)},Ue=function(e,t){var r,n;if(0===t.length||null==e)return e;try{for(var o=ze(e.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;if(a!==We&&t.startsWith(a))return Ue(e.get(a),t.slice(a.length))}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},Qe=function(e,t){var r,n,o=t.length;e:for(var i=0;e&&i<o;){try{for(var a=(r=void 0,ze(e.keys())),s=a.next();!s.done;s=a.next()){var l=s.value;if(l!==We&&t[i]===l[0]){for(var u=Math.min(o-i,l.length),c=1;c<u&&t[i+c]===l[c];)++c;var d=e.get(l);if(c===l.length)e=d;else{var h=new Map;h.set(l.slice(c),d),e.set(t.slice(i,i+c),h),e.delete(l),e=h}i+=c;continue e}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}var f=new Map;return e.set(t.slice(i),f),f}return e},Ye=function(e,t){var r=je(He(e,t),2),n=r[0],o=r[1];if(void 0!==n)if(n.delete(We),0===n.size)Ze(o);else if(1===n.size){var i=je(n.entries().next().value,2),a=i[0],s=i[1];Xe(o,a,s)}},Ze=function(e){if(0!==e.length){var t=je(et(e),2),r=t[0],n=t[1];if(r.delete(n),0===r.size)Ze(e.slice(0,-1));else if(1===r.size){var o=je(r.entries().next().value,2),i=o[0],a=o[1];i!==We&&Xe(e.slice(0,-1),i,a)}}},Xe=function(e,t,r){if(0!==e.length){var n=je(et(e),2),o=n[0],i=n[1];o.set(i+t,r),o.delete(i)}},et=function(e){return e[e.length-1]},tt="or",rt=function(){function e(e){if(null==(null==e?void 0:e.fields))throw new Error('MiniSearch: option "fields" must be provided');var t=null==e.autoVacuum||!0===e.autoVacuum?ht:e.autoVacuum;this._options=Me(Me(Me({},st),e),{autoVacuum:t,searchOptions:Me(Me({},lt),e.searchOptions||{}),autoSuggestOptions:Me(Me({},ut),e.autoSuggestOptions||{})}),this._index=new Ke,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldIds={},this._fieldLength=new Map,this._avgFieldLength=[],this._nextId=0,this._storedFields=new Map,this._dirtCount=0,this._currentVacuum=null,this._enqueuedVacuum=null,this._enqueuedVacuumConditions=dt,this.addFields(this._options.fields)}return e.prototype.add=function(e){var t,r,n,o,i,a,s=this._options,l=s.extractField,u=s.tokenize,c=s.processTerm,d=s.fields,h=s.idField,f=l(e,h);if(null==f)throw new Error('MiniSearch: document does not have ID field "'.concat(h,'"'));if(this._idToShortId.has(f))throw new Error("MiniSearch: duplicate ID ".concat(f));var p=this.addDocumentId(f);this.saveStoredFields(p,e);try{for(var v=ze(d),m=v.next();!m.done;m=v.next()){var y=m.value,g=l(e,y);if(null!=g){var b=u(g.toString(),y),w=this._fieldIds[y],x=new Set(b).size;this.addFieldLength(p,w,this._documentCount-1,x);try{for(var F=(n=void 0,ze(b)),E=F.next();!E.done;E=F.next()){var _=c(E.value,y);if(Array.isArray(_))try{for(var k=(i=void 0,ze(_)),S=k.next();!S.done;S=k.next()){var I=S.value;this.addTerm(w,p,I)}}catch(A){i={error:A}}finally{try{S&&!S.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}else _&&this.addTerm(w,p,_)}}catch(C){n={error:C}}finally{try{E&&!E.done&&(o=F.return)&&o.call(F)}finally{if(n)throw n.error}}}}}catch(N){t={error:N}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(t)throw t.error}}},e.prototype.addAll=function(e){var t,r;try{for(var n=ze(e),o=n.next();!o.done;o=n.next()){var i=o.value;this.add(i)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}},e.prototype.addAllAsync=function(e,t){var r=this;void 0===t&&(t={});var n=t.chunkSize,o=void 0===n?10:n,i={chunk:[],promise:Promise.resolve()},a=e.reduce((function(e,t,n){var i=e.chunk,a=e.promise;return i.push(t),(n+1)%o==0?{chunk:[],promise:a.then((function(){return new Promise((function(e){return setTimeout(e,0)}))})).then((function(){return r.addAll(i)}))}:{chunk:i,promise:a}}),i),s=a.chunk;return a.promise.then((function(){return r.addAll(s)}))},e.prototype.remove=function(e){var t,r,n,o,i,a,s=this._options,l=s.tokenize,u=s.processTerm,c=s.extractField,d=s.fields,h=s.idField,f=c(e,h);if(null==f)throw new Error('MiniSearch: document does not have ID field "'.concat(h,'"'));var p=this._idToShortId.get(f);if(null==p)throw new Error("MiniSearch: cannot remove document with ID ".concat(f,": it is not in the index"));try{for(var v=ze(d),m=v.next();!m.done;m=v.next()){var y=m.value,g=c(e,y);if(null!=g){var b=l(g.toString(),y),w=this._fieldIds[y],x=new Set(b).size;this.removeFieldLength(p,w,this._documentCount,x);try{for(var F=(n=void 0,ze(b)),E=F.next();!E.done;E=F.next()){var _=u(E.value,y);if(Array.isArray(_))try{for(var k=(i=void 0,ze(_)),S=k.next();!S.done;S=k.next()){var I=S.value;this.removeTerm(w,p,I)}}catch(A){i={error:A}}finally{try{S&&!S.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}else _&&this.removeTerm(w,p,_)}}catch(C){n={error:C}}finally{try{E&&!E.done&&(o=F.return)&&o.call(F)}finally{if(n)throw n.error}}}}}catch(N){t={error:N}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(t)throw t.error}}this._storedFields.delete(p),this._documentIds.delete(p),this._idToShortId.delete(f),this._fieldLength.delete(p),this._documentCount-=1},e.prototype.removeAll=function(e){var t,r;if(e)try{for(var n=ze(e),o=n.next();!o.done;o=n.next()){var i=o.value;this.remove(i)}}catch(a){t={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}else{if(arguments.length>0)throw new Error("Expected documents to be present. Omit the argument to remove all documents.");this._index=new Ke,this._documentCount=0,this._documentIds=new Map,this._idToShortId=new Map,this._fieldLength=new Map,this._avgFieldLength=[],this._storedFields=new Map,this._nextId=0}},e.prototype.discard=function(e){var t=this,r=this._idToShortId.get(e);if(null==r)throw new Error("MiniSearch: cannot discard document with ID ".concat(e,": it is not in the index"));this._idToShortId.delete(e),this._documentIds.delete(r),this._storedFields.delete(r),(this._fieldLength.get(r)||[]).forEach((function(e,n){t.removeFieldLength(r,n,t._documentCount,e)})),this._fieldLength.delete(r),this._documentCount-=1,this._dirtCount+=1,this.maybeAutoVacuum()},e.prototype.maybeAutoVacuum=function(){if(!1!==this._options.autoVacuum){var e=this._options.autoVacuum,t=e.minDirtFactor,r=e.minDirtCount,n=e.batchSize,o=e.batchWait;this.conditionalVacuum({batchSize:n,batchWait:o},{minDirtCount:r,minDirtFactor:t})}},e.prototype.discardAll=function(e){var t,r,n=this._options.autoVacuum;try{this._options.autoVacuum=!1;try{for(var o=ze(e),i=o.next();!i.done;i=o.next()){var a=i.value;this.discard(a)}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}}finally{this._options.autoVacuum=n}this.maybeAutoVacuum()},e.prototype.replace=function(e){var t=this._options,r=t.idField,n=(0,t.extractField)(e,r);this.discard(n),this.add(e)},e.prototype.vacuum=function(e){return void 0===e&&(e={}),this.conditionalVacuum(e)},e.prototype.conditionalVacuum=function(e,t){var r=this;return this._currentVacuum?(this._enqueuedVacuumConditions=this._enqueuedVacuumConditions&&t,null!=this._enqueuedVacuum||(this._enqueuedVacuum=this._currentVacuum.then((function(){var t=r._enqueuedVacuumConditions;return r._enqueuedVacuumConditions=dt,r.performVacuuming(e,t)}))),this._enqueuedVacuum):!1===this.vacuumConditionsMet(t)?Promise.resolve():(this._currentVacuum=this.performVacuuming(e),this._currentVacuum)},e.prototype.performVacuuming=function(e,t){return Le(this,0,void 0,(function(){var r,n,o,i,a,s,l,u,c,d,h,f,p,v,m,y,g,b,w,x,F,E,_,k,S;return Pe(this,(function(I){switch(I.label){case 0:if(r=this._dirtCount,!this.vacuumConditionsMet(t))return[3,10];n=e.batchSize||ct.batchSize,o=e.batchWait||ct.batchWait,i=1,I.label=1;case 1:I.trys.push([1,7,8,9]),a=ze(this._index),s=a.next(),I.label=2;case 2:if(s.done)return[3,6];l=je(s.value,2),u=l[0],c=l[1];try{for(E=void 0,d=ze(c),h=d.next();!h.done;h=d.next()){f=je(h.value,2),p=f[0],v=f[1];try{for(k=void 0,m=ze(v),y=m.next();!y.done;y=m.next())g=je(y.value,1),b=g[0],this._documentIds.has(b)||(v.size<=1?c.delete(p):v.delete(b))}catch(A){k={error:A}}finally{try{y&&!y.done&&(S=m.return)&&S.call(m)}finally{if(k)throw k.error}}}}catch(C){E={error:C}}finally{try{h&&!h.done&&(_=d.return)&&_.call(d)}finally{if(E)throw E.error}}return 0===this._index.get(u).size&&this._index.delete(u),i%n!=0?[3,4]:[4,new Promise((function(e){return setTimeout(e,o)}))];case 3:I.sent(),I.label=4;case 4:i+=1,I.label=5;case 5:return s=a.next(),[3,2];case 6:return[3,9];case 7:return w=I.sent(),x={error:w},[3,9];case 8:try{s&&!s.done&&(F=a.return)&&F.call(a)}finally{if(x)throw x.error}return[7];case 9:this._dirtCount-=r,I.label=10;case 10:return[4,null];case 11:return I.sent(),this._currentVacuum=this._enqueuedVacuum,this._enqueuedVacuum=null,[2]}}))}))},e.prototype.vacuumConditionsMet=function(e){if(null==e)return!0;var t=e.minDirtCount,r=e.minDirtFactor;return t=t||ht.minDirtCount,r=r||ht.minDirtFactor,this.dirtCount>=t&&this.dirtFactor>=r},Object.defineProperty(e.prototype,"isVacuuming",{get:function(){return null!=this._currentVacuum},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirtCount",{get:function(){return this._dirtCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dirtFactor",{get:function(){return this._dirtCount/(1+this._documentCount+this._dirtCount)},enumerable:!1,configurable:!0}),e.prototype.has=function(e){return this._idToShortId.has(e)},e.prototype.getStoredFields=function(e){var t=this._idToShortId.get(e);if(null!=t)return this._storedFields.get(t)},e.prototype.search=function(t,r){var n,o;void 0===r&&(r={});var i=this.executeQuery(t,r),a=[];try{for(var s=ze(i),l=s.next();!l.done;l=s.next()){var u=je(l.value,2),c=u[0],d=u[1],h=d.score,f=d.terms,p=d.match,v=f.length||1,m={id:this._documentIds.get(c),score:h*v,terms:Object.keys(p),queryTerms:f,match:p};Object.assign(m,this._storedFields.get(c)),(null==r.filter||r.filter(m))&&a.push(m)}}catch(y){n={error:y}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return t===e.wildcard&&null==r.boostDocument&&null==this._options.searchOptions.boostDocument||a.sort(vt),a},e.prototype.autoSuggest=function(e,t){var r,n,o,i;void 0===t&&(t={}),t=Me(Me({},this._options.autoSuggestOptions),t);var a=new Map;try{for(var s=ze(this.search(e,t)),l=s.next();!l.done;l=s.next()){var u=l.value,c=u.score,d=(g=u.terms).join(" ");null!=(m=a.get(d))?(m.score+=c,m.count+=1):a.set(d,{score:c,terms:g,count:1})}}catch(w){r={error:w}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}var h=[];try{for(var f=ze(a),p=f.next();!p.done;p=f.next()){var v=je(p.value,2),m=v[0],y=v[1],g=(c=y.score,y.terms),b=y.count;h.push({suggestion:m,terms:g,score:c/b})}}catch(x){o={error:x}}finally{try{p&&!p.done&&(i=f.return)&&i.call(f)}finally{if(o)throw o.error}}return h.sort(vt),h},Object.defineProperty(e.prototype,"documentCount",{get:function(){return this._documentCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"termCount",{get:function(){return this._index.size},enumerable:!1,configurable:!0}),e.loadJSON=function(e,t){if(null==t)throw new Error("MiniSearch: loadJSON should be given the same options used when serializing the index");return this.loadJS(JSON.parse(e),t)},e.getDefault=function(e){if(st.hasOwnProperty(e))return nt(st,e);throw new Error('MiniSearch: unknown option "'.concat(e,'"'))},e.loadJS=function(t,r){var n,o,i,a,s,l,u=t.index,c=t.documentCount,d=t.nextId,h=t.documentIds,f=t.fieldIds,p=t.fieldLength,v=t.averageFieldLength,m=t.storedFields,y=t.dirtCount,g=t.serializationVersion;if(1!==g&&2!==g)throw new Error("MiniSearch: cannot deserialize an index created with an incompatible version");var b=new e(r);b._documentCount=c,b._nextId=d,b._documentIds=yt(h),b._idToShortId=new Map,b._fieldIds=f,b._fieldLength=yt(p),b._avgFieldLength=v,b._storedFields=yt(m),b._dirtCount=y||0,b._index=new Ke;try{for(var w=ze(b._documentIds),x=w.next();!x.done;x=w.next()){var F=je(x.value,2),E=F[0],_=F[1];b._idToShortId.set(_,E)}}catch(M){n={error:M}}finally{try{x&&!x.done&&(o=w.return)&&o.call(w)}finally{if(n)throw n.error}}try{for(var k=ze(u),S=k.next();!S.done;S=k.next()){var I=je(S.value,2),A=I[0],C=I[1],N=new Map;try{for(var T=(s=void 0,ze(Object.keys(C))),O=T.next();!O.done;O=T.next()){var D=O.value,R=C[D];1===g&&(R=R.ds),N.set(parseInt(D,10),yt(R))}}catch(L){s={error:L}}finally{try{O&&!O.done&&(l=T.return)&&l.call(T)}finally{if(s)throw s.error}}b._index.set(A,N)}}catch(P){i={error:P}}finally{try{S&&!S.done&&(a=k.return)&&a.call(k)}finally{if(i)throw i.error}}return b},e.prototype.executeQuery=function(t,r){var n=this;if(void 0===r&&(r={}),t===e.wildcard)return this.executeWildcardQuery(r);if("string"!=typeof t){var o=Me(Me(Me({},r),t),{queries:void 0}),i=t.queries.map((function(e){return n.executeQuery(e,o)}));return this.combineResults(i,o.combineWith)}var a=this._options,s=a.tokenize,l=a.processTerm,u=a.searchOptions,c=Me(Me({tokenize:s,processTerm:l},u),r),d=c.tokenize,h=c.processTerm,f=d(t).flatMap((function(e){return h(e)})).filter((function(e){return!!e})).map(at(c)).map((function(e){return n.executeQuerySpec(e,c)}));return this.combineResults(f,c.combineWith)},e.prototype.executeQuerySpec=function(e,t){var r,n,o,i,a,s,l=Me(Me({},this._options.searchOptions),t),u=(l.fields||this._options.fields).reduce((function(e,t){var r;return Me(Me({},e),((r={})[t]=nt(l.boost,t)||1,r))}),{}),c=l.boostDocument,d=l.weights,h=l.maxFuzzy,f=l.bm25,p=Me(Me({},lt.weights),d),v=p.fuzzy,m=p.prefix,y=this._index.get(e.term),g=this.termResults(e.term,e.term,1,y,u,c,f);if(e.prefix&&(a=this._index.atPrefix(e.term)),e.fuzzy){var b=!0===e.fuzzy?.2:e.fuzzy,w=b<1?Math.min(h,Math.round(e.term.length*b)):b;w&&(s=this._index.fuzzyGet(e.term,w))}if(a)try{for(var x=ze(a),F=x.next();!F.done;F=x.next()){var E=je(F.value,2),_=E[0],k=E[1];if(C=_.length-e.term.length){null==s||s.delete(_);var S=m*_.length/(_.length+.3*C);this.termResults(e.term,_,S,k,u,c,f,g)}}}catch(O){r={error:O}}finally{try{F&&!F.done&&(n=x.return)&&n.call(x)}finally{if(r)throw r.error}}if(s)try{for(var I=ze(s.keys()),A=I.next();!A.done;A=I.next()){_=A.value;var C,N=je(s.get(_),2),T=N[0];if(C=N[1]){S=v*_.length/(_.length+C);this.termResults(e.term,_,S,T,u,c,f,g)}}}catch(D){o={error:D}}finally{try{A&&!A.done&&(i=I.return)&&i.call(I)}finally{if(o)throw o.error}}return g},e.prototype.executeWildcardQuery=function(e){var t,r,n=new Map,o=Me(Me({},this._options.searchOptions),e);try{for(var i=ze(this._documentIds),a=i.next();!a.done;a=i.next()){var s=je(a.value,2),l=s[0],u=s[1],c=o.boostDocument?o.boostDocument(u,"",this._storedFields.get(l)):1;n.set(l,{score:c,terms:[],match:{}})}}catch(d){t={error:d}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return n},e.prototype.combineResults=function(e,t){if(void 0===t&&(t=tt),0===e.length)return new Map;var r=t.toLowerCase();return e.reduce(ot[r])||new Map},e.prototype.toJSON=function(){var e,t,r,n,o=[];try{for(var i=ze(this._index),a=i.next();!a.done;a=i.next()){var s=je(a.value,2),l=s[0],u=s[1],c={};try{for(var d=(r=void 0,ze(u)),h=d.next();!h.done;h=d.next()){var f=je(h.value,2),p=f[0],v=f[1];c[p]=Object.fromEntries(v)}}catch(m){r={error:m}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(r)throw r.error}}o.push([l,c])}}catch(y){e={error:y}}finally{try{a&&!a.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return{documentCount:this._documentCount,nextId:this._nextId,documentIds:Object.fromEntries(this._documentIds),fieldIds:this._fieldIds,fieldLength:Object.fromEntries(this._fieldLength),averageFieldLength:this._avgFieldLength,storedFields:Object.fromEntries(this._storedFields),dirtCount:this._dirtCount,index:o,serializationVersion:2}},e.prototype.termResults=function(e,t,r,n,o,i,a,s){var l,u,c,d,h;if(void 0===s&&(s=new Map),null==n)return s;try{for(var f=ze(Object.keys(o)),p=f.next();!p.done;p=f.next()){var v=p.value,m=o[v],y=this._fieldIds[v],g=n.get(y);if(null!=g){var b=g.size,w=this._avgFieldLength[y];try{for(var x=(c=void 0,ze(g.keys())),F=x.next();!F.done;F=x.next()){var E=F.value;if(this._documentIds.has(E)){var _=i?i(this._documentIds.get(E),t,this._storedFields.get(E)):1;if(_){var k=g.get(E),S=this._fieldLength.get(E)[y],I=r*m*_*it(k,b,this._documentCount,S,w,a),A=s.get(E);if(A){A.score+=I,ft(A.terms,e);var C=nt(A.match,t);C?C.push(v):A.match[t]=[v]}else s.set(E,{score:I,terms:[e],match:(h={},h[t]=[v],h)})}}else this.removeTerm(y,E,t),b-=1}}catch(N){c={error:N}}finally{try{F&&!F.done&&(d=x.return)&&d.call(x)}finally{if(c)throw c.error}}}}}catch(T){l={error:T}}finally{try{p&&!p.done&&(u=f.return)&&u.call(f)}finally{if(l)throw l.error}}return s},e.prototype.addTerm=function(e,t,r){var n=this._index.fetch(r,mt),o=n.get(e);if(null==o)(o=new Map).set(t,1),n.set(e,o);else{var i=o.get(t);o.set(t,(i||0)+1)}},e.prototype.removeTerm=function(e,t,r){if(this._index.has(r)){var n=this._index.fetch(r,mt),o=n.get(e);null==o||null==o.get(t)?this.warnDocumentChanged(t,e,r):o.get(t)<=1?o.size<=1?n.delete(e):o.delete(t):o.set(t,o.get(t)-1),0===this._index.get(r).size&&this._index.delete(r)}else this.warnDocumentChanged(t,e,r)},e.prototype.warnDocumentChanged=function(e,t,r){var n,o;try{for(var i=ze(Object.keys(this._fieldIds)),a=i.next();!a.done;a=i.next()){var s=a.value;if(this._fieldIds[s]===t)return void this._options.logger("warn","MiniSearch: document with ID ".concat(this._documentIds.get(e),' has changed before removal: term "').concat(r,'" was not present in field "').concat(s,'". Removing a document after it has changed can corrupt the index!'),"version_conflict")}}catch(l){n={error:l}}finally{try{a&&!a.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}},e.prototype.addDocumentId=function(e){var t=this._nextId;return this._idToShortId.set(e,t),this._documentIds.set(t,e),this._documentCount+=1,this._nextId+=1,t},e.prototype.addFields=function(e){for(var t=0;t<e.length;t++)this._fieldIds[e[t]]=t},e.prototype.addFieldLength=function(e,t,r,n){var o=this._fieldLength.get(e);null==o&&this._fieldLength.set(e,o=[]),o[t]=n;var i=(this._avgFieldLength[t]||0)*r+n;this._avgFieldLength[t]=i/(r+1)},e.prototype.removeFieldLength=function(e,t,r,n){if(1!==r){var o=this._avgFieldLength[t]*r-n;this._avgFieldLength[t]=o/(r-1)}else this._avgFieldLength[t]=0},e.prototype.saveStoredFields=function(e,t){var r,n,o=this._options,i=o.storeFields,a=o.extractField;if(null!=i&&0!==i.length){var s=this._storedFields.get(e);null==s&&this._storedFields.set(e,s={});try{for(var l=ze(i),u=l.next();!u.done;u=l.next()){var c=u.value,d=a(t,c);void 0!==d&&(s[c]=d)}}catch(h){r={error:h}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}}},e.wildcard=Symbol("*"),e}(),nt=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},ot=((Be={})[tt]=function(e,t){var r,n;try{for(var o=ze(t.keys()),i=o.next();!i.done;i=o.next()){var a=i.value,s=e.get(a);if(null==s)e.set(a,t.get(a));else{var l=t.get(a),u=l.score,c=l.terms,d=l.match;s.score=s.score+u,s.match=Object.assign(s.match,d),pt(s.terms,c)}}}catch(h){r={error:h}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e},Be.and=function(e,t){var r,n,o=new Map;try{for(var i=ze(t.keys()),a=i.next();!a.done;a=i.next()){var s=a.value,l=e.get(s);if(null!=l){var u=t.get(s),c=u.score,d=u.terms,h=u.match;pt(l.terms,d),o.set(s,{score:l.score+c,terms:l.terms,match:Object.assign(l.match,h)})}}}catch(f){r={error:f}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}return o},Be.and_not=function(e,t){var r,n;try{for(var o=ze(t.keys()),i=o.next();!i.done;i=o.next()){var a=i.value;e.delete(a)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return e},Be),it=function(e,t,r,n,o,i){var a=i.k,s=i.b,l=i.d;return Math.log(1+(r-t+.5)/(t+.5))*(l+e*(a+1)/(e+a*(1-s+s*n/o)))},at=function(e){return function(t,r,n){return{term:t,fuzzy:"function"==typeof e.fuzzy?e.fuzzy(t,r,n):e.fuzzy||!1,prefix:"function"==typeof e.prefix?e.prefix(t,r,n):!0===e.prefix}}},st={idField:"id",extractField:function(e,t){return e[t]},tokenize:function(e){return e.split(gt)},processTerm:function(e){return e.toLowerCase()},fields:void 0,searchOptions:void 0,storeFields:[],logger:function(e,t){"function"==typeof(null===console||void 0===console?void 0:console[e])&&console[e](t)},autoVacuum:!0},lt={combineWith:tt,prefix:!1,fuzzy:!1,maxFuzzy:6,boost:{},weights:{fuzzy:.45,prefix:.375},bm25:{k:1.2,b:.7,d:.5}},ut={combineWith:"and",prefix:function(e,t,r){return t===r.length-1}},ct={batchSize:1e3,batchWait:10},dt={minDirtFactor:.1,minDirtCount:20},ht=Me(Me({},ct),dt),ft=function(e,t){e.includes(t)||e.push(t)},pt=function(e,t){var r,n;try{for(var o=ze(t),i=o.next();!i.done;i=o.next()){var a=i.value;e.includes(a)||e.push(a)}}catch(s){r={error:s}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},vt=function(e,t){var r=e.score;return t.score-r},mt=function(){return new Map},yt=function(e){var t,r,n=new Map;try{for(var o=ze(Object.keys(e)),i=o.next();!i.done;i=o.next()){var a=i.value;n.set(parseInt(a,10),e[a])}}catch(s){t={error:s}}finally{try{i&&!i.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return n},gt=/[\n\r -#%-*,-/:;?@[-\]_{}\u00A0\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u1680\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2000-\u200A\u2010-\u2029\u202F-\u2043\u2045-\u2051\u2053-\u205F\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u3000-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]+/u;class bt{constructor(e=10){t(this,"max"),t(this,"cache"),this.max=e,this.cache=new Map}get(e){let t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){this.cache.has(e)?this.cache.delete(e):this.cache.size===this.max&&this.cache.delete(this.first()),this.cache.set(e,t)}first(){return this.cache.keys().next().value}clear(){this.cache.clear()}}const wt=["aria-owns"],xt={class:"shell"},Ft=["title"],Et={class:"search-actions before"},_t=["title"],kt=["placeholder"],St={class:"search-actions"},It=["title"],At=["disabled","title"],Ct=["id","role","aria-labelledby"],Nt=["aria-selected"],Tt=["href","aria-label","onMouseenter","onFocusin"],Ot={class:"titles"},Dt=["innerHTML"],Rt={class:"title main"},Mt=["innerHTML"],Lt={key:0,class:"excerpt-wrapper"},Pt={key:0,class:"excerpt",inert:""},zt=["innerHTML"],jt={key:0,class:"no-results"},Bt={class:"search-keyboard-shortcuts"},Vt=["aria-label"],$t=["aria-label"],Wt=["aria-label"],Gt=["aria-label"],qt=K(o({__name:"VPLocalSearchBox",emits:["close"],setup(e,{emit:t}){var o,N;const K=t,U=i(),Q=i(),Y=i(H),Z=D(),{activate:X}=function(e,t={}){let o;const{immediate:i,...a}=t,s=r(!1),l=r(!1),u=e=>o&&o.activate(e),c=e=>o&&o.deactivate(e);return n((()=>T(e)),(e=>{e&&(o=Te(e,{...a,onActivate(){s.value=!0,t.onActivate&&t.onActivate()},onDeactivate(){s.value=!1,t.onDeactivate&&t.onDeactivate()}}),i&&u())}),{flush:"post"}),O((()=>c())),{hasFocus:s,isPaused:l,activate:u,deactivate:c,pause:()=>{o&&(o.pause(),l.value=!0)},unpause:()=>{o&&(o.unpause(),l.value=!1)}}}(U,{immediate:!0,allowOutsideClick:!0,clickOutsideDeactivates:!0,escapeDeactivates:!0}),{localeIndex:ee,theme:te}=Z,re=R((async()=>{var e,t,r,n,o,i,a,s,l;return A(rt.loadJSON(null==(r=await(null==(t=(e=Y.value)[ee.value])?void 0:t.call(e)))?void 0:r.default,{fields:["title","titles","text"],storeFields:["title","titles"],searchOptions:{fuzzy:.2,prefix:!0,boost:{title:4,text:2,titles:1},..."local"===(null==(n=te.value.search)?void 0:n.provider)&&(null==(i=null==(o=te.value.search.options)?void 0:o.miniSearch)?void 0:i.searchOptions)},..."local"===(null==(a=te.value.search)?void 0:a.provider)&&(null==(l=null==(s=te.value.search.options)?void 0:s.miniSearch)?void 0:l.options)}))})),ne=a((()=>{var e,t;return"local"===(null==(e=te.value.search)?void 0:e.provider)&&!0===(null==(t=te.value.search.options)?void 0:t.disableQueryPersistence)})).value?r(""):M("vitepress:local-search-filter",""),oe=L("vitepress:local-search-detailed-list","local"===(null==(o=te.value.search)?void 0:o.provider)&&!0===(null==(N=te.value.search.options)?void 0:N.detailedView)),ie=a((()=>{var e,t,r;return"local"===(null==(e=te.value.search)?void 0:e.provider)&&(!0===(null==(t=te.value.search.options)?void 0:t.disableDetailedView)||!1===(null==(r=te.value.search.options)?void 0:r.detailedView))})),ae=a((()=>{var e,t,r,n,o,i,a;const s=(null==(e=te.value.search)?void 0:e.options)??te.value.algolia;return(null==(o=null==(n=null==(r=null==(t=null==s?void 0:s.locales)?void 0:t[ee.value])?void 0:r.translations)?void 0:n.button)?void 0:o.buttonText)||(null==(a=null==(i=null==s?void 0:s.translations)?void 0:i.button)?void 0:a.buttonText)||"Search"}));s((()=>{ie.value&&(oe.value=!1)}));const se=i([]),le=r(!1);n(ne,(()=>{le.value=!1}));const ue=R((async()=>{if(Q.value)return A(new Re(Q.value))}),null),ce=new bt(16);P((()=>[re.value,ne.value,oe.value]),(async([e,t,r],n,o)=>{var i,a,s,l;(null==n?void 0:n[0])!==e&&ce.clear();let c=!1;if(o((()=>{c=!0})),!e)return;se.value=e.search(t).slice(0,16),le.value=!0;const d=r?await Promise.all(se.value.map((e=>async function(e){const t=J(e.slice(0,e.indexOf("#")));try{if(!t)throw new Error(`Cannot find file for id: ${e}`);return{id:e,mod:await import(t)}}catch(r){return console.error(r),{id:e,mod:{}}}}(e.id)))):[];if(c)return;for(const{id:u,mod:p}of d){const e=u.slice(0,u.indexOf("#"));let t=ce.get(e);if(t)continue;t=new Map,ce.set(e,t);const r=p.default??p;if((null==r?void 0:r.render)||(null==r?void 0:r.setup)){const e=C(r);e.config.warnHandler=()=>{},e.provide(q,Z),Object.defineProperties(e.config.globalProperties,{$frontmatter:{get:()=>Z.frontmatter.value},$params:{get:()=>Z.page.value.params}});const n=document.createElement("div");e.mount(n);n.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach((e=>{var r;const n=null==(r=e.querySelector("a"))?void 0:r.getAttribute("href"),o=(null==n?void 0:n.startsWith("#"))&&n.slice(1);if(!o)return;let i="";for(;(e=e.nextElementSibling)&&!/^h[1-6]$/i.test(e.tagName);)i+=e.outerHTML;t.set(o,i)})),e.unmount()}if(c)return}const h=new Set;if(se.value=se.value.map((e=>{const[t,r]=e.id.split("#"),n=ce.get(t),o=(null==n?void 0:n.get(r))??"";for(const i in e.match)h.add(i);return{...e,text:o}})),await u(),c)return;await new Promise((e=>{var t;null==(t=ue.value)||t.unmark({done:()=>{var t;null==(t=ue.value)||t.markRegExp(function(e){return new RegExp([...e].sort(((e,t)=>t.length-e.length)).map((e=>`(${e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")})`)).join("|"),"gi")}(h),{done:e})}})}));const f=(null==(i=U.value)?void 0:i.querySelectorAll(".result .excerpt"))??[];for(const u of f)null==(a=u.querySelector('mark[data-markjs="true"]'))||a.scrollIntoView({block:"center"});null==(l=null==(s=Q.value)?void 0:s.firstElementChild)||l.scrollIntoView({block:"start"})}),{debounce:200,immediate:!0});const de=r(),he=a((()=>{var e;return(null==(e=ne.value)?void 0:e.length)<=0}));function fe(e=!0){var t,r;null==(t=de.value)||t.focus(),e&&(null==(r=de.value)||r.select())}l((()=>{fe()}));const pe=r(-1),ve=r(!1);function me(){u((()=>{const e=document.querySelector(".result.selected");e&&e.scrollIntoView({block:"nearest"})}))}n(se,(e=>{pe.value=e.length?0:-1,me()})),z("ArrowUp",(e=>{e.preventDefault(),pe.value--,pe.value<0&&(pe.value=se.value.length-1),ve.value=!0,me()})),z("ArrowDown",(e=>{e.preventDefault(),pe.value++,pe.value>=se.value.length&&(pe.value=0),ve.value=!0,me()}));const ye=j();z("Enter",(e=>{if(e.target instanceof HTMLButtonElement&&"submit"!==e.target.type)return;const t=se.value[pe.value];e.target instanceof HTMLInputElement&&!t?e.preventDefault():t&&(ye.go(t.id),K("close"))})),z("Escape",(()=>{K("close")}));const ge=B(V)(c((()=>{var e;return null==(e=te.value.search)?void 0:e.options})),{modal:{displayDetails:"Display detailed list",resetButtonTitle:"Reset search",backButtonTitle:"Close search",noResultsText:"No results for",footer:{selectText:"to select",selectKeyAriaLabel:"enter",navigateText:"to navigate",navigateUpKeyAriaLabel:"up arrow",navigateDownKeyAriaLabel:"down arrow",closeText:"to close",closeKeyAriaLabel:"escape"}}});l((()=>{window.history.pushState(null,"",null)})),$("popstate",(e=>{e.preventDefault(),K("close")}));const be=W(G?document.body:null);function we(){ne.value="",u().then((()=>fe(!1)))}return l((()=>{u((()=>{be.value=!0,u().then((()=>X()))}))})),d((()=>{be.value=!1})),(e,t)=>{var r,n,o,i;return h(),f(I,{to:"body"},[p("div",{ref_key:"el",ref:U,role:"button","aria-owns":(null==(r=se.value)?void 0:r.length)?"localsearch-list":void 0,"aria-expanded":"true","aria-haspopup":"listbox","aria-labelledby":"localsearch-label",class:"VPLocalSearchBox"},[p("div",{class:"backdrop",onClick:t[0]||(t[0]=t=>e.$emit("close"))}),p("div",xt,[p("form",{class:"search-bar",onPointerup:t[4]||(t[4]=e=>{"mouse"===e.pointerType&&fe()}),onSubmit:t[5]||(t[5]=v((()=>{}),["prevent"]))},[p("label",{title:ae.value,id:"localsearch-label",for:"localsearch-input"},t[8]||(t[8]=[p("svg",{class:"search-icon",width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true"},[p("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[p("circle",{cx:"11",cy:"11",r:"8"}),p("path",{d:"m21 21l-4.35-4.35"})])],-1)]),8,Ft),p("div",Et,[p("button",{class:"back-button",title:m(ge)("modal.backButtonTitle"),onClick:t[1]||(t[1]=t=>e.$emit("close"))},t[9]||(t[9]=[p("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 12H5m7 7l-7-7l7-7"})],-1)]),8,_t)]),y(p("input",{ref_key:"searchInput",ref:de,"onUpdate:modelValue":t[2]||(t[2]=e=>b(ne)?ne.value=e:null),placeholder:ae.value,id:"localsearch-input","aria-labelledby":"localsearch-label",class:"search-input"},null,8,kt),[[g,m(ne)]]),p("div",St,[ie.value?F("",!0):(h(),w("button",{key:0,class:x(["toggle-layout-button",{"detailed-list":m(oe)}]),type:"button",title:m(ge)("modal.displayDetails"),onClick:t[3]||(t[3]=e=>pe.value>-1&&(oe.value=!m(oe)))},t[10]||(t[10]=[p("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 14h7v7H3zM3 3h7v7H3zm11 1h7m-7 5h7m-7 6h7m-7 5h7"})],-1)]),10,It)),p("button",{class:"clear-button",type:"reset",disabled:he.value,title:m(ge)("modal.resetButtonTitle"),onClick:we},t[11]||(t[11]=[p("svg",{width:"18",height:"18",viewBox:"0 0 24 24","aria-hidden":"true"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 5H9l-7 7l7 7h11a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2Zm-2 4l-6 6m0-6l6 6"})],-1)]),8,At)])],32),p("ul",{ref_key:"resultsEl",ref:Q,id:(null==(n=se.value)?void 0:n.length)?"localsearch-list":void 0,role:(null==(o=se.value)?void 0:o.length)?"listbox":void 0,"aria-labelledby":(null==(i=se.value)?void 0:i.length)?"localsearch-label":void 0,class:"results",onMousemove:t[7]||(t[7]=e=>ve.value=!1)},[(h(!0),w(_,null,E(se.value,((r,n)=>(h(),w("li",{key:r.id,role:"option","aria-selected":pe.value===n?"true":"false"},[p("a",{href:r.id,class:x(["result",{selected:pe.value===n}]),"aria-label":[...r.titles,r.title].join(" > "),onMouseenter:e=>!ve.value&&(pe.value=n),onFocusin:e=>pe.value=n,onClick:t[6]||(t[6]=t=>e.$emit("close"))},[p("div",null,[p("div",Ot,[t[13]||(t[13]=p("span",{class:"title-icon"},"#",-1)),(h(!0),w(_,null,E(r.titles,((e,r)=>(h(),w("span",{key:r,class:"title"},[p("span",{class:"text",innerHTML:e},null,8,Dt),t[12]||(t[12]=p("svg",{width:"18",height:"18",viewBox:"0 0 24 24"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m9 18l6-6l-6-6"})],-1))])))),128)),p("span",Rt,[p("span",{class:"text",innerHTML:r.title},null,8,Mt)])]),m(oe)?(h(),w("div",Lt,[r.text?(h(),w("div",Pt,[p("div",{class:"vp-doc",innerHTML:r.text},null,8,zt)])):F("",!0),t[14]||(t[14]=p("div",{class:"excerpt-gradient-bottom"},null,-1)),t[15]||(t[15]=p("div",{class:"excerpt-gradient-top"},null,-1))])):F("",!0)])],42,Tt)],8,Nt)))),128)),m(ne)&&!se.value.length&&le.value?(h(),w("li",jt,[k(S(m(ge)("modal.noResultsText"))+' "',1),p("strong",null,S(m(ne)),1),t[16]||(t[16]=k('" '))])):F("",!0)],40,Ct),p("div",Bt,[p("span",null,[p("kbd",{"aria-label":m(ge)("modal.footer.navigateUpKeyAriaLabel")},t[17]||(t[17]=[p("svg",{width:"14",height:"14",viewBox:"0 0 24 24"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 19V5m-7 7l7-7l7 7"})],-1)]),8,Vt),p("kbd",{"aria-label":m(ge)("modal.footer.navigateDownKeyAriaLabel")},t[18]||(t[18]=[p("svg",{width:"14",height:"14",viewBox:"0 0 24 24"},[p("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v14m7-7l-7 7l-7-7"})],-1)]),8,$t),k(" "+S(m(ge)("modal.footer.navigateText")),1)]),p("span",null,[p("kbd",{"aria-label":m(ge)("modal.footer.selectKeyAriaLabel")},t[19]||(t[19]=[p("svg",{width:"14",height:"14",viewBox:"0 0 24 24"},[p("g",{fill:"none",stroke:"currentcolor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[p("path",{d:"m9 10l-5 5l5 5"}),p("path",{d:"M20 4v7a4 4 0 0 1-4 4H4"})])],-1)]),8,Wt),k(" "+S(m(ge)("modal.footer.selectText")),1)]),p("span",null,[p("kbd",{"aria-label":m(ge)("modal.footer.closeKeyAriaLabel")},"esc",8,Gt),k(" "+S(m(ge)("modal.footer.closeText")),1)])])])],8,wt)])}}}),[["__scopeId","data-v-b153cc99"]]);export{qt as default};
